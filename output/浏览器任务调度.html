<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React ä»»åŠ¡è°ƒåº¦åŸç†ä¸æµè§ˆå™¨è°ƒåº¦API</title>
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer components {
            .card {
                @apply bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 mb-6;
            }
            .section-title {
                @apply text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-4;
            }
            .subsection-title {
                @apply text-xl md:text-2xl font-semibold text-gray-700 dark:text-gray-200 mb-3 mt-6;
            }
            .paragraph {
                @apply text-gray-600 dark:text-gray-300 mb-4 leading-relaxed;
            }
            .list-item {
                @apply flex items-start mb-2;
            }
            .list-marker {
                @apply text-primary-500 mr-2 mt-1 flex-shrink-0;
            }
            .code-block {
                @apply bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm overflow-x-auto mb-4;
            }
            .tag {
                @apply inline-block bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 px-2 py-1 rounded text-sm mr-2 mb-2;
            }
            .table-container {
                @apply overflow-x-auto mb-6;
            }
            .comparison-table {
                @apply min-w-full border-collapse;
            }
            .comparison-table th {
                @apply bg-gray-100 dark:bg-gray-700 text-left p-3 font-semibold text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600;
            }
            .comparison-table td {
                @apply p-3 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300;
            }
            .btn {
                @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105;
            }
            .btn-primary {
                @apply bg-primary-500 text-white hover:bg-primary-600;
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-200">
    <!-- å¯¼èˆªæ  -->
    <nav class="sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <i class="fas fa-tasks text-primary-500 text-2xl mr-2"></i>
                    <span class="font-bold text-xl">React ä»»åŠ¡è°ƒåº¦</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- ç›®å½•å¯¼èˆª -->
    <div class="bg-gray-100 dark:bg-gray-800 py-4 border-b border-gray-200 dark:border-gray-700 sticky top-16 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-wrap gap-2">
                <a href="#intro" class="tag hover:bg-primary-200 dark:hover:bg-primary-800">å¼•è¨€</a>
                <a href="#react-render" class="tag hover:bg-primary-200 dark:hover:bg-primary-800">æ¸²æŸ“æµç¨‹</a>
                <a href="#core-concepts" class="tag hover:bg-primary-200 dark:hover:bg-primary-800">æ ¸å¿ƒæ¦‚å¿µ</a>
                <a href="#execution-flow" class="tag hover:bg-primary-200 dark:hover:bg-primary-800">æ‰§è¡Œæµç¨‹</a>
                <a href="#concurrent-mode" class="tag hover:bg-primary-200 dark:hover:bg-primary-800">å¹¶å‘æ¨¡å¼</a>
                <a href="#optimization" class="tag hover:bg-primary-200 dark:hover:bg-primary-800">ä¼˜åŒ–ç­–ç•¥</a>
                <a href="#api-comparison" class="tag hover:bg-primary-200 dark:hover:bg-primary-800">APIå¯¹æ¯”</a>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-fade-in">
        <!-- æ ‡é¢˜éƒ¨åˆ† -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 text-gray-900 dark:text-white">React çš„ä»»åŠ¡è°ƒåº¦åŸç†</h1>
            <p class="text-xl text-gray-600 dark:text-gray-400">æ·±å…¥ç†è§£ Concurrent Mode ä¸æµè§ˆå™¨ä»»åŠ¡è°ƒåº¦</p>
        </div>

        <!-- å¼•è¨€éƒ¨åˆ† -->
        <section id="intro" class="card">
            <h2 class="section-title">å¼•è¨€</h2>
            <p class="paragraph">
                React çš„æ ¸å¿ƒç›®æ ‡ä¹‹ä¸€æ˜¯æä¾›<span class="font-semibold text-primary-600 dark:text-primary-400">é«˜æ€§èƒ½ã€æµç•…çš„ UI ä½“éªŒ</span>ï¼Œè€Œä»»åŠ¡è°ƒåº¦ï¼ˆTask Schedulingï¼‰æ˜¯å…¶ä¸­çš„å…³é”®éƒ¨åˆ†ã€‚React é€šè¿‡åè°ƒï¼ˆReconciliationï¼‰å’Œå¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰ï¼Œåˆ©ç”¨æ—¶é—´åˆ‡ç‰‡ï¼ˆTime-Slicingï¼‰å’Œä¼˜å…ˆçº§è°ƒåº¦ï¼ˆPriority Schedulingï¼‰æ¥é«˜æ•ˆåœ°æ›´æ–° UIï¼Œé¿å…æ‰å¸§ï¼ˆFrame Dropï¼‰å’Œå¡é¡¿ã€‚
            </p>
            <div class="flex flex-wrap gap-2 mt-4">
                <span class="tag">Reconciliation</span>
                <span class="tag">Concurrent Mode</span>
                <span class="tag">Time-Slicing</span>
                <span class="tag">Priority Scheduling</span>
            </div>
        </section>

        <!-- æ¸²æŸ“æµç¨‹éƒ¨åˆ† -->
        <section id="react-render" class="card">
            <h2 class="section-title">React æ¸²æŸ“çš„åŸºæœ¬æµç¨‹</h2>
            <p class="paragraph">åœ¨ React ä¸­ï¼Œæ¸²æŸ“æµç¨‹å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border-l-4 border-blue-500 hover:shadow-md transition-all">
                    <div class="flex items-center mb-2">
                        <div class="w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mr-2">
                            <span class="text-blue-600 dark:text-blue-300 font-bold">1</span>
                        </div>
                        <h3 class="font-semibold">è°ƒåº¦ï¼ˆSchedulingï¼‰</h3>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300">ç¡®å®šæœ¬æ¬¡æ¸²æŸ“ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œäº¤ç»™è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ã€‚</p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border-l-4 border-green-500 hover:shadow-md transition-all">
                    <div class="flex items-center mb-2">
                        <div class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mr-2">
                            <span class="text-green-600 dark:text-green-300 font-bold">2</span>
                        </div>
                        <h3 class="font-semibold">åè°ƒï¼ˆReconciliationï¼‰</h3>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300">è®¡ç®— UI å˜æ›´ï¼Œç”Ÿæˆ Fiber æ ‘ã€‚</p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border-l-4 border-purple-500 hover:shadow-md transition-all">
                    <div class="flex items-center mb-2">
                        <div class="w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mr-2">
                            <span class="text-purple-600 dark:text-purple-300 font-bold">3</span>
                        </div>
                        <h3 class="font-semibold">æäº¤ï¼ˆCommitï¼‰</h3>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300">å°†å˜æ›´åº”ç”¨åˆ°çœŸå® DOMï¼ˆæˆ– Native è§†å›¾ï¼‰ã€‚</p>
                </div>
            </div>
        </section>

        <!-- æ ¸å¿ƒæ¦‚å¿µéƒ¨åˆ† -->
        <section id="core-concepts" class="card">
            <h2 class="section-title">ä»»åŠ¡è°ƒåº¦çš„æ ¸å¿ƒæ¦‚å¿µ</h2>
            <p class="paragraph">React ä½¿ç”¨å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰æ¥è¿›è¡Œä»»åŠ¡è°ƒåº¦ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
            
            <h3 class="subsection-title">Fiber æ¶æ„</h3>
            <p class="paragraph">
                React åœ¨ v16 ä¹‹åå¼•å…¥äº† Fiber æ¶æ„ï¼Œä½¿å¾—ä»»åŠ¡å¯ä»¥è¢«ä¸­æ–­ã€æ¢å¤å’Œé‡æ–°è°ƒåº¦ã€‚æ¯ä¸ª UI ç»„ä»¶éƒ½ä¼šå¯¹åº”ä¸€ä¸ª Fiber èŠ‚ç‚¹ï¼Œç”¨äºå­˜å‚¨ä»»åŠ¡çŠ¶æ€ã€‚
            </p>
            
            <h3 class="subsection-title">Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰</h3>
            <p class="paragraph">
                React è‡ªå¸¦ä¸€ä¸ªè°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ï¼ŒåŸºäº requestIdleCallbackï¼ˆæ—©æœŸç‰ˆæœ¬ï¼‰å’Œ MessageChannelï¼ˆæ›´é«˜æ•ˆï¼‰å®ç°ä»»åŠ¡ç®¡ç†ã€‚å®ƒä¼šï¼š
            </p>
            <ul class="mb-4">
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-check-circle"></i></span>
                    <span>æ‹†åˆ†ä»»åŠ¡ï¼Œé˜²æ­¢é˜»å¡ä¸»çº¿ç¨‹ï¼ˆé¿å…æ‰å¸§ï¼‰ã€‚</span>
                </li>
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-check-circle"></i></span>
                    <span>åˆ†é…ä¼˜å…ˆçº§ï¼Œä¿è¯é«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ï¼‰ã€‚</span>
                </li>
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-check-circle"></i></span>
                    <span>åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œä»»åŠ¡ï¼Œæå‡æµç•…åº¦ã€‚</span>
                </li>
            </ul>
            
            <h3 class="subsection-title">Time-Slicingï¼ˆæ—¶é—´åˆ‡ç‰‡ï¼‰</h3>
            <p class="paragraph">
                ä¼ ç»Ÿçš„ JavaScript æ‰§è¡Œæ˜¯åŒæ­¥ã€é˜»å¡çš„ï¼Œè€Œ React é‡‡ç”¨æ—¶é—´åˆ‡ç‰‡ï¼ˆTime-Slicingï¼‰æ–¹å¼æ‰§è¡Œä»»åŠ¡ï¼š
            </p>
            <ul class="mb-4">
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-clock"></i></span>
                    <span>æ¯å¸§ï¼ˆFrameï¼‰çº¦ 16.67msï¼ˆ60FPSï¼‰ã€‚</span>
                </li>
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-pause-circle"></i></span>
                    <span>React ä¼šåœ¨ä»»åŠ¡æ‰§è¡Œè¶…æ—¶æˆ–æµè§ˆå™¨éœ€è¦å¤„ç†æ›´é«˜ä¼˜å…ˆçº§ä»»åŠ¡æ—¶ä¸­æ–­æ¸²æŸ“ï¼Œç„¶ååœ¨ä¸‹ä¸€å¸§ç»§ç»­æ‰§è¡Œã€‚</span>
                </li>
            </ul>
        </section>

        <!-- æ‰§è¡Œæµç¨‹éƒ¨åˆ† -->
        <section id="execution-flow" class="card">
            <h2 class="section-title">React ä»»åŠ¡è°ƒåº¦çš„æ‰§è¡Œæµç¨‹</h2>
            
            <h3 class="subsection-title">ä»»åŠ¡çš„ä¼˜å…ˆçº§</h3>
            <p class="paragraph">React å°†ä»»åŠ¡åˆ†ä¸ºä¸åŒçš„ä¼˜å…ˆçº§ï¼ˆä½äº Scheduler å†…éƒ¨ï¼‰ï¼š</p>
            
            <div class="table-container">
                <table class="comparison-table">
                    <thead>
                                                <tr>
                            <th>ä¼˜å…ˆçº§</th>
                            <th>æè¿°</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Immediate</td>
                            <td>æœ€é«˜ä¼˜å…ˆçº§ï¼Œå¿…é¡»ç«‹å³æ‰§è¡Œ</td>
                            <td>useEffect æ¸…ç†</td>
                        </tr>
                        <tr>
                            <td>User Blocking</td>
                            <td>éœ€è¦å°½å¿«æ‰§è¡Œçš„ä»»åŠ¡</td>
                            <td>è¾“å…¥ã€æŒ‰é’®ç‚¹å‡»</td>
                        </tr>
                        <tr>
                            <td>Normal</td>
                            <td>é»˜è®¤ä¼˜å…ˆçº§</td>
                            <td>çŠ¶æ€æ›´æ–°</td>
                        </tr>
                        <tr>
                            <td>Low</td>
                            <td>å¯ä»¥å»¶è¿Ÿçš„ä»»åŠ¡</td>
                            <td>æ•°æ®åŠ è½½</td>
                        </tr>
                        <tr>
                            <td>Idle</td>
                            <td>æœ€ä½ä¼˜å…ˆçº§ï¼Œæµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œ</td>
                            <td>é¢„åŠ è½½ã€æ—¥å¿—ä¸ŠæŠ¥</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <p class="paragraph">React é€šè¿‡ Schedulerï¼ˆreact-reconcilerï¼‰ç®¡ç†è¿™äº›ä»»åŠ¡ï¼Œå¹¶å†³å®šä½•æ—¶æ‰§è¡Œã€‚</p>
            
            <h3 class="subsection-title">ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼</h3>
            <p class="paragraph">React ä½¿ç”¨ MessageChannelï¼ˆä»£æ›¿ requestIdleCallbackï¼‰è°ƒåº¦ä»»åŠ¡ï¼š</p>
            <ol class="mb-4 pl-6 list-decimal">
                <li class="mb-2">å…ˆæ‰§è¡Œé«˜ä¼˜ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·äº¤äº’ï¼‰ã€‚</li>
                <li class="mb-2">å¦‚æœä»»åŠ¡è¶…æ—¶ï¼Œæš‚åœæ¸²æŸ“ï¼Œç­‰å¾…ä¸‹ä¸€å¸§ç»§ç»­ã€‚</li>
                <li class="mb-2">ä»»åŠ¡å¯ä¸­æ–­ï¼Œç¡®ä¿ä¸»çº¿ç¨‹å¯ä»¥å“åº”äº‹ä»¶ã€‚</li>
            </ol>
            
            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="text-sm text-gray-600 dark:text-gray-300">
                    <span class="font-semibold">ç¤ºä¾‹ï¼š</span> ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒReact ä¼šä¼˜å…ˆæ›´æ–°è¾“å…¥æ¡†çš„ valueï¼Œè€Œä¸æ˜¯ä½ä¼˜å…ˆçº§çš„ UI æ¸²æŸ“ã€‚
                </p>
            </div>
        </section>

        <!-- å¹¶å‘æ¨¡å¼éƒ¨åˆ† -->
        <section id="concurrent-mode" class="card">
            <h2 class="section-title">React å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰</h2>
            <p class="paragraph">å¹¶å‘æ¨¡å¼æ˜¯ React ä»»åŠ¡è°ƒåº¦çš„æ ¸å¿ƒï¼Œä¸»è¦ç‰¹æ€§ï¼š</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg hover:shadow-md transition-all">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-pause-circle text-primary-500 mr-2"></i>
                        <h3 class="font-semibold">å¯ä¸­æ–­æ¸²æŸ“</h3>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300">é•¿æ—¶é—´ä»»åŠ¡å¯ä»¥è¢«æ‰“æ–­ï¼Œç¡®ä¿é«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œã€‚</p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg hover:shadow-md transition-all">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-sort-amount-up text-primary-500 mr-2"></i>
                        <h3 class="font-semibold">ä¼˜å…ˆçº§è°ƒåº¦</h3>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300">æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼ˆå¦‚è¾“å…¥æ¡†è¾“å…¥ï¼‰ä¸ä¼šè¢«ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚åˆ—è¡¨æ¸²æŸ“ï¼‰é˜»å¡ã€‚</p>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg hover:shadow-md transition-all">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-sync-alt text-primary-500 mr-2"></i>
                        <h3 class="font-semibold">å¼‚æ­¥æ¸²æŸ“</h3>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300">ä¸å†ä¸€æ¬¡æ€§åŒæ­¥è®¡ç®—æ•´ä¸ª Fiber æ ‘ï¼Œè€Œæ˜¯æŒ‰éœ€æ¸²æŸ“ã€‚</p>
                </div>
            </div>
            
            <h3 class="subsection-title">ç¤ºä¾‹ï¼šä½¿ç”¨ useTransition è¿›è¡Œä»»åŠ¡è°ƒåº¦</h3>
            <div class="code-block">
                <pre><code class="language-jsx">import { useState, useTransition } from "react";

function App() {
  const [text, setText] = useState("");
  const [list, setList] = useState&lt;string[]&gt;([]);
  const [isPending, startTransition] = useTransition();

  const handleChange = (e) => {
    setText(e.target.value);
    startTransition(() => {
      setList(Array(20000).fill(e.target.value)); // å¤§é‡æ›´æ–°ä»»åŠ¡
    });
  };

  return (
    &lt;div&gt;
      &lt;input value={text} onChange={handleChange} /&gt;
      {isPending && &lt;p&gt;æ¸²æŸ“ä¸­...&lt;/p&gt;}
      {list.map((item, index) => (
        &lt;p key={index}&gt;{item}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
}</code></pre>
            </div>
            
            <ul class="mb-4">
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-bolt"></i></span>
                    <span><code>setText</code> ç«‹å³æ›´æ–°ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ã€‚</span>
                </li>
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-clock"></i></span>
                    <span><code>setList</code> é€šè¿‡ useTransition å»¶è¿Ÿå¤„ç†ï¼Œé¿å…é˜»å¡è¾“å…¥å“åº”ã€‚</span>
                </li>
            </ul>
        </section>

        <!-- ä¼˜åŒ–ç­–ç•¥éƒ¨åˆ† -->
        <section id="optimization" class="card">
            <h2 class="section-title">React ä»»åŠ¡è°ƒåº¦çš„ä¼˜åŒ–ç­–ç•¥</h2>
            
            <h3 class="subsection-title">é¿å…åŒæ­¥é˜»å¡</h3>
            <p class="paragraph">
                ä½¿ç”¨ useTransition æˆ– useDeferredValueï¼Œç¡®ä¿é«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œã€‚
            </p>
            
            <h3 class="subsection-title">ä½¿ç”¨ startTransition é™ä½ UI æ›´æ–°å‹åŠ›</h3>
            <div class="code-block">
                <pre><code class="language-jsx">startTransition(() => {
  setList(data);
});</code></pre>
            </div>
            <ul class="mb-4">
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-check-circle"></i></span>
                    <span>ä½ä¼˜å…ˆçº§ä»»åŠ¡ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</span>
                </li>
            </ul>
            
            <h3 class="subsection-title">é¿å…é‡å¤æ¸²æŸ“</h3>
            <ul class="mb-4">
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-code"></i></span>
                    <span><code>useMemo / useCallback</code> é¿å…ä¸å¿…è¦çš„é‡æ–°è®¡ç®—ã€‚</span>
                </li>
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-code"></i></span>
                    <span><code>React.memo()</code> é¿å…ç»„ä»¶é‡å¤æ¸²æŸ“ã€‚</span>
                </li>
            </ul>
        </section>

        <!-- APIå¯¹æ¯”éƒ¨åˆ† -->
        <section id="api-comparison" class="card">
            <h2 class="section-title">requestIdleCallback vs. MessageChannel</h2>
            <p class="paragraph">æµè§ˆå™¨ä»»åŠ¡è°ƒåº¦çš„ä¸¤ä¸ªå…³é”® APIï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå¹¿æ³›åº”ç”¨äº Reactã€Vue ç­‰å‰ç«¯æ¡†æ¶çš„è°ƒåº¦æœºåˆ¶ä¸­ã€‚</p>
            
            <h3 class="subsection-title">ä»€ä¹ˆæ˜¯ requestIdleCallbackï¼Ÿ</h3>
            <p class="paragraph">
                requestIdleCallback æ˜¯æµè§ˆå™¨æä¾›çš„<span class="font-semibold">ç©ºé—²æ—¶é—´å›è°ƒ API</span>ï¼Œç”¨äºåœ¨æµè§ˆå™¨æœ‰ç©ºé—²æ—¶é—´æ—¶æ‰§è¡Œä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œè€Œä¸ä¼šå½±å“å…³é”®æ¸²æŸ“ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·äº¤äº’ï¼‰ã€‚
            </p>
            
            <div class="code-block">
                <pre><code class="language-javascript">requestIdleCallback((deadline) => {
  while (deadline.timeRemaining() > 0) {
    console.log("æ‰§è¡Œä»»åŠ¡");
  }
});</code></pre>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">âœ… ä¼˜ç‚¹</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                            <span>åˆ©ç”¨æµè§ˆå™¨ç©ºé—²æ—¶é—´ï¼Œä¸å½±å“æµç•…åº¦ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                            <span>ä¸ä¼šå½±å“é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œé€‚åˆéå…³é”®è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—ä¸ŠæŠ¥ã€ç¼“å­˜é¢„åŠ è½½ï¼‰ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                            <span>æ”¯æŒè¶…æ—¶æœºåˆ¶ï¼ˆå¦‚ { timeout: 2000 }ï¼‰ï¼Œç¡®ä¿ä»»åŠ¡ä¸ä¼šæ— é™æœŸå»¶è¿Ÿã€‚</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-red-700 dark:text-red-400 mb-2">âŒ ç¼ºç‚¹</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-times text-red-500 mr-2 mt-1"></i>
                            <span>ä¸ä¿è¯åŠæ—¶æ‰§è¡Œï¼Œå¦‚æœæµè§ˆå™¨ä¸€ç›´å¿™ï¼ˆå¦‚æ»šåŠ¨ã€åŠ¨ç”»ï¼‰ï¼Œä»»åŠ¡å¯èƒ½ä¼šè¢«å»¶è¿Ÿã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-times text-red-500 mr-2 mt-1"></i>
                            <span>ä¸é€‚ç”¨äºé«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œå¦‚ç”¨æˆ·è¾“å…¥å¤„ç†ã€åŠ¨ç”»æ›´æ–°ã€‚</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <h3 class="subsection-title">ä»€ä¹ˆæ˜¯ MessageChannelï¼Ÿ</h3>
            <p class="paragraph">
                MessageChannel æ˜¯<span class="font-semibold">å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰</span>çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ç”¨äºåœ¨ä¸»çº¿ç¨‹å†…å¤–ä¼ é€’æ¶ˆæ¯å¹¶æ‰§è¡Œä»»åŠ¡ã€‚ç›¸æ¯” requestIdleCallbackï¼Œå®ƒçš„æ‰§è¡Œæ—¶æœºæ›´å¯æ§ï¼Œä¸å—æµè§ˆå™¨ç©ºé—²çŠ¶æ€å½±å“ã€‚
            </p>
            
            <div class="code-block">
                <pre><code class="language-javascript">const channel = new MessageChannel();
const port = channel.port1;

port.onmessage = () => {
  console.log("æ‰§è¡Œä»»åŠ¡");
};

// å‘é€æ¶ˆæ¯ï¼Œè§¦å‘å¾®ä»»åŠ¡
channel.port2.postMessage(null);</code></pre>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">âœ… ä¼˜ç‚¹</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                            <span>æ‰§è¡Œæ—¶æœºæ›´å¿«ï¼Œå±äºå¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰ï¼Œä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯æ‰§è¡Œã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                            <span>ä¸å—æµè§ˆå™¨å¸§ç‡å½±å“ï¼Œé€‚ç”¨äºé«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚ä»»åŠ¡è°ƒåº¦ã€React æ›´æ–°ï¼‰ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                            <span>æ›´å¯æ§ï¼Œä¸ä¼šè¢«æµè§ˆå™¨çš„ç©ºé—²çŠ¶æ€é™åˆ¶ã€‚</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-red-700 dark:text-red-400 mb-2">âŒ ç¼ºç‚¹</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-times text-red-500 mr-2 mt-1"></i>
                            <span>å¯èƒ½å½±å“ UI æµç•…åº¦ï¼Œå¦‚æœæ‰§è¡Œå¤§é‡ä»»åŠ¡ï¼Œå¯èƒ½å¯¼è‡´æ‰å¸§ã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-times text-red-500 mr-2 mt-1"></i>
                                                        <span>ä¸é€‚ç”¨äºåå°ä»»åŠ¡ï¼Œå› ä¸ºå®ƒä¸ä¼šç­‰å¾…æµè§ˆå™¨ç©ºé—²ã€‚</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <h3 class="subsection-title">API å¯¹æ¯”</h3>
            <div class="table-container">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>requestIdleCallback</th>
                            <th>MessageChannel</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>æ‰§è¡Œæ—¶æœº</td>
                            <td>æµè§ˆå™¨ç©ºé—²æ—¶</td>
                            <td>ä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰</td>
                        </tr>
                        <tr>
                            <td>ä¼˜å…ˆçº§</td>
                            <td>ä½ä¼˜å…ˆçº§</td>
                            <td>é«˜ä¼˜å…ˆçº§</td>
                        </tr>
                        <tr>
                            <td>é€‚ç”¨åœºæ™¯</td>
                            <td>åå°è®¡ç®—ã€æ—¥å¿—æ”¶é›†ã€é¢„åŠ è½½</td>
                            <td>UI æ›´æ–°ã€è°ƒåº¦ä»»åŠ¡</td>
                        </tr>
                        <tr>
                            <td>å—æµè§ˆå™¨å¸§ç‡å½±å“</td>
                            <td>æ˜¯</td>
                            <td>å¦</td>
                        </tr>
                        <tr>
                            <td>React å†…éƒ¨æ˜¯å¦ä½¿ç”¨</td>
                            <td>å¦</td>
                            <td>æ˜¯ï¼ˆè°ƒåº¦ä»»åŠ¡ï¼‰</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <h3 class="subsection-title">React ä¸ºä»€ä¹ˆä½¿ç”¨ MessageChannel è€Œä¸æ˜¯ requestIdleCallbackï¼Ÿ</h3>
            <p class="paragraph">
                React éœ€è¦é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦æœºåˆ¶ï¼Œæ‰€ä»¥é‡‡ç”¨äº† MessageChannel è€Œä¸æ˜¯ requestIdleCallbackï¼š
            </p>
            <ol class="mb-4 pl-6 list-decimal">
                <li class="mb-2">requestIdleCallback æ‰§è¡Œä¸ç¨³å®šï¼Œå¦‚æœæµè§ˆå™¨ç¹å¿™ï¼ˆåŠ¨ç”»ã€æ»šåŠ¨ï¼‰ï¼Œä»»åŠ¡å¯èƒ½è¢«å»¶è¿Ÿï¼Œå½±å“ React æ›´æ–°ã€‚</li>
                <li class="mb-2">MessageChannel æ‰§è¡Œæ—¶æœºå¯æ§ï¼Œå±äºå¾®ä»»åŠ¡ï¼Œå¯ä»¥ç¡®ä¿é«˜ä¼˜å…ˆçº§ä»»åŠ¡å¾—åˆ°åŠæ—¶æ‰§è¡Œã€‚</li>
            </ol>
            
            <h3 class="subsection-title">React å†…éƒ¨å®ç°</h3>
            <div class="code-block">
                <pre><code class="language-javascript">const channel = new MessageChannel();
const port = channel.port1;

port.onmessage = () => {
  workLoop(); // å¤„ç† Fiber ä»»åŠ¡
};

function scheduleWork() {
  port.postMessage(null); // è§¦å‘è°ƒåº¦
}</code></pre>
            </div>
            <p class="paragraph">
                æ¯æ¬¡æœ‰æ–°çš„ Fiber ä»»åŠ¡ï¼ŒReact é€šè¿‡ postMessage(null) è§¦å‘ workLoop()ï¼Œç¡®ä¿ä»»åŠ¡èƒ½åœ¨å½“å‰äº‹ä»¶å¾ªç¯å°½å¿«æ‰§è¡Œã€‚
            </p>
            
            <h3 class="subsection-title">ä½¿ç”¨åœºæ™¯é€‰æ‹©</h3>
            <div class="table-container">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>åœºæ™¯</th>
                            <th>é€‚åˆä½¿ç”¨ requestIdleCallback</th>
                            <th>é€‚åˆä½¿ç”¨ MessageChannel</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>åå°è®¡ç®—</td>
                            <td class="text-green-500">âœ… æ˜¯</td>
                            <td class="text-red-500">âŒ å¦</td>
                        </tr>
                        <tr>
                            <td>UI ä»»åŠ¡è°ƒåº¦</td>
                            <td class="text-red-500">âŒ å¦</td>
                            <td class="text-green-500">âœ… æ˜¯</td>
                        </tr>
                        <tr>
                            <td>React è°ƒåº¦ä»»åŠ¡</td>
                            <td class="text-red-500">âŒ å¦</td>
                            <td class="text-green-500">âœ… æ˜¯</td>
                        </tr>
                        <tr>
                            <td>æ—¥å¿—ä¸ŠæŠ¥</td>
                            <td class="text-green-500">âœ… æ˜¯</td>
                            <td class="text-red-500">âŒ å¦</td>
                        </tr>
                        <tr>
                            <td>åŠ¨ç”» / ç”¨æˆ·äº¤äº’</td>
                            <td class="text-red-500">âŒ å¦</td>
                            <td class="text-green-500">âœ… æ˜¯</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ç»“è®ºéƒ¨åˆ† -->
        <section class="card">
            <h2 class="section-title">ç»“è®º</h2>
            <p class="paragraph">
                React é€šè¿‡ Fiber æ¶æ„å’Œ Scheduler å®ç°é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦ï¼Œæ ¸å¿ƒç‚¹ï¼š
            </p>
            <ul class="mb-4">
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-check-circle"></i></span>
                    <span>æ—¶é—´åˆ‡ç‰‡ï¼ˆTime-Slicingï¼‰è®©æ¸²æŸ“ä»»åŠ¡ä¸ä¼šå¡é¡¿ã€‚</span>
                </li>
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-check-circle"></i></span>
                    <span>ä»»åŠ¡ä¼˜å…ˆçº§è°ƒåº¦ç¡®ä¿ç”¨æˆ·ä½“éªŒæµç•…ã€‚</span>
                </li>
                <li class="list-item">
                    <span class="list-marker"><i class="fas fa-check-circle"></i></span>
                    <span>å¹¶å‘æ¨¡å¼è®© React èƒ½å¤Ÿæ›´æ™ºèƒ½åœ°ç®¡ç†ä»»åŠ¡ã€‚</span>
                </li>
            </ul>
            
            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">æœªæ¥å±•æœ›</h4>
                <ul class="space-y-2">
                    <li class="flex items-start">
                        <i class="fas fa-arrow-right text-blue-500 mr-2 mt-1"></i>
                        <span>React 19 å¯èƒ½ä¼šè¿›ä¸€æ­¥ä¼˜åŒ–ä»»åŠ¡è°ƒåº¦ï¼Œæå‡ React Suspense çš„èƒ½åŠ›ã€‚</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-arrow-right text-blue-500 mr-2 mt-1"></i>
                        <span>React Server Components è®©æ•°æ®è·å–å’Œ UI æ¸²æŸ“æ›´åŠ é«˜æ•ˆã€‚</span>
                    </li>
                </ul>
            </div>
            
            <div class="mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-primary-500">
                <p class="text-center text-gray-700 dark:text-gray-300 italic">
                    ğŸ‘‰ å¦‚æœä½ çš„ä»»åŠ¡éœ€è¦å°½å¿«æ‰§è¡Œï¼Œé€‰æ‹© MessageChannelï¼›å¦‚æœæ˜¯éå…³é”®ä»»åŠ¡ï¼Œé€‰æ‹© requestIdleCallbackã€‚ ğŸš€
                </p>
            </div>
        </section>
    </main>

    <!-- é¡µè„šéƒ¨åˆ† -->
    <footer class="bg-gray-100 dark:bg-gray-800 py-8 border-t border-gray-200 dark:border-gray-700 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <h3 class="text-lg font-bold text-gray-800 dark:text-white mb-2">ä½œè€…ä¿¡æ¯</h3>
                    <p class="text-gray-600 dark:text-gray-400">ä½œè€…å§“å: [ä½œè€…å§“å]</p>
                </div>
                <div class="flex space-x-4">
                    <a href="https://github.com/" class="text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400">
                        <i class="fab fa-github text-2xl"></i>
                    </a>
                    <a href="https://twitter.com/" class="text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400">
                        <i class="fab fa-twitter text-2xl"></i>
                    </a>
                    <a href="https://linkedin.com/" class="text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400">
                        <i class="fab fa-linkedin text-2xl"></i>
                    </a>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700 text-center">
                <p class="text-gray-600 dark:text-gray-400">Â© 2023 ç‰ˆæƒæ‰€æœ‰ã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // æ·±è‰²æ¨¡å¼åˆ‡æ¢
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        
        // æ£€æŸ¥ç³»ç»Ÿåå¥½
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            html.classList.remove('light');
            html.classList.add('dark');
        }
        
        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
        });
        
        // å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // ä»£ç é«˜äº®
        document.querySelectorAll('pre code').forEach(block => {
            block.innerHTML = block.innerHTML
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
        });
        
        // æ·»åŠ æ·¡å…¥åŠ¨ç”»
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fade-in');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        
        document.querySelectorAll('section').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>